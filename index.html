<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Heaven's Treasury - Ultimate Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Arial', sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: white;
        overflow-x: hidden;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
    }

    .header {
        text-align: center;
        margin-bottom: 30px;
    }

    .title {
        font-size: 3rem;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        animation: glow 2s ease-in-out infinite alternate;
    }

    @keyframes glow {
        from { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 10px #ffd700; }
        to { text-shadow: 2px 2px 4px rgba(0,0,0,0.5), 0 0 20px #ffd700, 0 0 30px #ffd700; }
    }

    .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
        text-align: center;
    }

    .stat-value {
        font-size: 2rem;
        font-weight: bold;
        color: #ffd700;
    }

    .main-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .click-section {
        text-align: center;
    }

    .treasure-btn {
        width: 200px;
        height: 200px;
        border: none;
        border-radius: 50%;
        background: linear-gradient(45deg, #ffd700, #ffed4a);
        font-size: 1.5rem;
        font-weight: bold;
        color: #8b4513;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 10px 30px rgba(255,215,0,0.4);
        margin-bottom: 20px;
    }

    .treasure-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 15px 40px rgba(255,215,0,0.6);
    }

    .treasure-btn:active {
        transform: scale(0.95);
    }

    .upgrades-section {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
    }

    .buildings-section {
        background: rgba(255,255,255,0.1);
        padding: 20px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.2);
        margin-bottom: 20px;
    }

    .section-title {
        font-size: 1.5rem;
        margin-bottom: 15px;
        text-align: center;
        color: #ffd700;
    }

    .upgrade-item, .building-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px;
        margin-bottom: 10px;
        background: rgba(255,255,255,0.05);
        border-radius: 10px;
        border: 1px solid rgba(255,255,255,0.1);
    }

    .upgrade-info, .building-info {
        flex: 1;
    }

    .upgrade-name, .building-name {
        font-weight: bold;
        margin-bottom: 5px;
    }

    .upgrade-desc, .building-desc {
        font-size: 0.9rem;
        opacity: 0.8;
    }

    .upgrade-btn, .building-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        background: linear-gradient(45deg, #4facfe, #00f2fe);
        color: white;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .upgrade-btn:hover, .building-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(79,172,254,0.4);
    }

    .upgrade-btn:disabled, .building-btn:disabled {
        background: #666;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
    }

    .prestige-section {
        background: linear-gradient(45deg, #667eea, #764ba2);
        padding: 20px;
        border-radius: 15px;
        border: 2px solid #ffd700;
        text-align: center;
        margin-bottom: 20px;
    }

    .prestige-btn {
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        background: linear-gradient(45deg, #ffd700, #ffed4a);
        color: #8b4513;
        font-size: 1.2rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .prestige-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 10px 25px rgba(255,215,0,0.4);
    }

    .prestige-btn:disabled {
        background: #666;
        color: #ccc;
        cursor: not-allowed;
        transform: none;
    }

    .achievement {
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(45deg, #ffd700, #ffed4a);
        color: #8b4513;
        padding: 15px 25px;
        border-radius: 10px;
        font-weight: bold;
        box-shadow: 0 10px 30px rgba(255,215,0,0.6);
        transform: translateX(400px);
        transition: transform 0.5s ease;
        z-index: 1000;
    }

    .achievement.show {
        transform: translateX(0);
    }

    .music-controls {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(255,255,255,0.1);
        padding: 10px;
        border-radius: 10px;
        backdrop-filter: blur(10px);
    }

    .music-btn {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        padding: 5px;
    }

    .floating-gold {
        position: absolute;
        color: #ffd700;
        font-weight: bold;
        font-size: 1.5rem;
        pointer-events: none;
        animation: floatUp 2s ease-out forwards;
    }

    @keyframes floatUp {
        0% {
            transform: translateY(0);
            opacity: 1;
        }
        100% {
            transform: translateY(-100px);
            opacity: 0;
        }
    }

    .special-section {
        background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        padding: 20px;
        border-radius: 15px;
        border: 2px solid #ffd700;
        margin-bottom: 20px;
    }

    @media (max-width: 768px) {
        .main-content {
            grid-template-columns: 1fr;
        }
        
        .treasure-btn {
            width: 150px;
            height: 150px;
            font-size: 1.2rem;
        }
        
        .title {
            font-size: 2rem;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">Heaven's Treasury</h1>
            <p>Ultimate Edition - Click, Build, Prestige, Ascend!</p>
        </div>

```
    <div class="stats">
        <div class="stat-card">
            <div class="stat-value" id="goldDisplay">0</div>
            <div>Gold</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="clickPowerDisplay">1</div>
            <div>Gold per Click</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="autoGoldDisplay">0</div>
            <div>Gold per Second</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="prestigeLevel">0</div>
            <div>Prestige Level</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="totalEarned">0</div>
            <div>Total Earned</div>
        </div>
    </div>

    <div class="prestige-section">
        <h3>🌟 Prestige System</h3>
        <p>Reset your progress for permanent bonuses! (Requires 1,000,000 gold)</p>
        <button class="prestige-btn" id="prestigeBtn" onclick="prestige()">
            Prestige (+<span id="prestigeBonus">10</span>% permanent bonus)
        </button>
    </div>

    <div class="special-section">
        <h3 class="section-title">⚡ Divine Powers</h3>
        <div class="upgrade-item">
            <div class="upgrade-info">
                <div class="upgrade-name">Midas Touch</div>
                <div class="upgrade-desc">5x gold from clicking for 30 seconds</div>
            </div>
            <button class="upgrade-btn" id="midasBtn" onclick="activateMidas()">
                Cost: <span id="midasCost">10000</span>
            </button>
        </div>
        
        <div class="upgrade-item">
            <div class="upgrade-info">
                <div class="upgrade-name">Golden Rain</div>
                <div class="upgrade-desc">Automatic clicks for 60 seconds</div>
            </div>
            <button class="upgrade-btn" id="rainBtn" onclick="activateRain()">
                Cost: <span id="rainCost">50000</span>
            </button>
        </div>
    </div>

    <div class="main-content">
        <div class="click-section">
            <button class="treasure-btn" id="treasureBtn" onclick="clickTreasure()">
                💰 CLICK ME! 💰
            </button>
            <p>Click the treasure to earn gold!</p>
            <div id="powerStatus"></div>
        </div>

        <div class="upgrades-section">
            <h3 class="section-title">⚡ Power Upgrades</h3>
            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">Better Pickaxe</div>
                    <div class="upgrade-desc">+1 gold per click</div>
                </div>
                <button class="upgrade-btn" id="pickaxeBtn" onclick="buyUpgrade('pickaxe')">
                    Cost: <span id="pickaxeCost">10</span>
                </button>
            </div>

            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">Auto-Clicker</div>
                    <div class="upgrade-desc">+1 gold per second</div>
                </div>
                <button class="upgrade-btn" id="autoClickerBtn" onclick="buyUpgrade('autoClicker')">
                    Cost: <span id="autoClickerCost">100</span>
                </button>
            </div>

            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">Golden Multiplier</div>
                    <div class="upgrade-desc">2x gold from all sources</div>
                </div>
                <button class="upgrade-btn" id="multiplierBtn" onclick="buyUpgrade('multiplier')">
                    Cost: <span id="multiplierCost">500</span>
                </button>
            </div>

            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">Lucky Charm</div>
                    <div class="upgrade-desc">10% chance of double gold</div>
                </div>
                <button class="upgrade-btn" id="luckBtn" onclick="buyUpgrade('luck')">
                    Cost: <span id="luckCost">2000</span>
                </button>
            </div>

            <div class="upgrade-item">
                <div class="upgrade-info">
                    <div class="upgrade-name">Divine Blessing</div>
                    <div class="upgrade-desc">+50% gold per click permanently</div>
                </div>
                <button class="upgrade-btn" id="blessingBtn" onclick="buyUpgrade('blessing')">
                    Cost: <span id="blessingCost">15000</span>
                </button>
            </div>
        </div>
    </div>

    <div class="buildings-section">
        <h3 class="section-title">🏗️ Heavenly Buildings</h3>
        <div class="building-item">
            <div class="building-info">
                <div class="building-name">Gold Mine (Owned: <span id="goldMineCount">0</span>)</div>
                <div class="building-desc">Generates 5 gold per second</div>
            </div>
            <button class="building-btn" id="goldMineBtn" onclick="buyBuilding('goldMine')">
                Cost: <span id="goldMineCost">1000</span>
            </button>
        </div>

        <div class="building-item">
            <div class="building-info">
                <div class="building-name">Treasury Vault (Owned: <span id="treasuryCount">0</span>)</div>
                <div class="building-desc">Generates 25 gold per second</div>
            </div>
            <button class="building-btn" id="treasuryBtn" onclick="buyBuilding('treasury')">
                Cost: <span id="treasuryCost">5000</span>
            </button>
        </div>

        <div class="building-item">
            <div class="building-info">
                <div class="building-name">Angel Investment (Owned: <span id="angelCount">0</span>)</div>
                <div class="building-desc">Generates 100 gold per second</div>
            </div>
            <button class="building-btn" id="angelBtn" onclick="buyBuilding('angel')">
                Cost: <span id="angelCost">25000</span>
            </button>
        </div>

        <div class="building-item">
            <div class="building-info">
                <div class="building-name">Crystal Palace (Owned: <span id="palaceCount">0</span>)</div>
                <div class="building-desc">Generates 500 gold per second</div>
            </div>
            <button class="building-btn" id="palaceBtn" onclick="buyBuilding('palace')">
                Cost: <span id="palaceCost">100000</span>
            </button>
        </div>

        <div class="building-item">
            <div class="building-info">
                <div class="building-name">Heaven's Gate (Owned: <span id="gateCount">0</span>)</div>
                <div class="building-desc">Generates 2000 gold per second</div>
            </div>
            <button class="building-btn" id="gateBtn" onclick="buyBuilding('gate')">
                Cost: <span id="gateCost">500000</span>
            </button>
        </div>
    </div>
</div>

<div id="achievementNotification" class="achievement"></div>

<div class="music-controls">
    <button class="music-btn" id="musicBtn" onclick="toggleMusic()">🎵</button>
</div>

<script>
    let gameState = {
        gold: 0,
        clickPower: 1,
        autoGold: 0,
        prestigeLevel: 0,
        prestigeBonus: 1,
        totalEarned: 0,
        luckChance: 0,
        midasActive: false,
        rainActive: false,
        upgrades: {
            pickaxe: { count: 0, cost: 10, baseCost: 10 },
            autoClicker: { count: 0, cost: 100, baseCost: 100 },
            multiplier: { count: 0, cost: 500, baseCost: 500 },
            luck: { count: 0, cost: 2000, baseCost: 2000 },
            blessing: { count: 0, cost: 15000, baseCost: 15000 }
        },
        buildings: {
            goldMine: { count: 0, cost: 1000, baseCost: 1000, production: 5 },
            treasury: { count: 0, cost: 5000, baseCost: 5000, production: 25 },
            angel: { count: 0, cost: 25000, baseCost: 25000, production: 100 },
            palace: { count: 0, cost: 100000, baseCost: 100000, production: 500 },
            gate: { count: 0, cost: 500000, baseCost: 500000, production: 2000 }
        },
        achievements: {
            firstClick: false,
            hundred: false,
            thousand: false,
            tenThousand: false,
            million: false,
            firstUpgrade: false,
            firstBuilding: false,
            firstPrestige: false,
            richPlayer: false
        }
    };

    let musicPlaying = false;
    let audioContext = null;
    let musicGain = null;

    function initAudio() {
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            musicGain = audioContext.createGain();
            musicGain.connect(audioContext.destination);
            musicGain.gain.value = 0.3;
            return true;
        } catch (e) {
            console.log('Audio not supported');
            return false;
        }
    }

    function playSound(frequency, duration = 0.2, type = 'sine') {
        try {
            if (!audioContext && !initAudio()) return;
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            oscillator.type = type;
            
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + duration);
        } catch (e) {
            console.log('Sound play failed');
        }
    }

    function playBackgroundMusic() {
        if (!audioContext && !initAudio()) return;
        
        const notes = [523.25, 587.33, 659.25, 698.46, 783.99, 880.00, 987.77, 1046.50];
        let noteIndex = 0;
        
        function playNote() {
            if (musicPlaying && audioContext) {
                try {
                    const oscillator = audioContext.createOscillator();
                    oscillator.connect(musicGain);
                    oscillator.frequency.setValueAtTime(notes[noteIndex], audioContext.currentTime);
                    oscillator.type = 'sine';
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                    
                    noteIndex = (noteIndex + 1) % notes.length;
                    setTimeout(playNote, 1000);
                } catch (e) {
                    console.log('Music play failed');
                }
            }
        }
        
        if (musicPlaying) playNote();
    }

    function toggleMusic() {
        if (!audioContext) {
            initAudio();
        }
        
        musicPlaying = !musicPlaying;
        const btn = document.getElementById('musicBtn');
        btn.textContent = musicPlaying ? '🔇' : '🎵';
        
        if (musicPlaying) {
            playBackgroundMusic();
        }
    }

    function clickTreasure() {
        // Initialize audio on first click if needed
        if (!audioContext) {
            initAudio();
        }
        
        let goldEarned = Math.floor(gameState.clickPower * gameState.prestigeBonus);
        
        // Lucky charm bonus
        if (gameState.luckChance > 0 && Math.random() < gameState.luckChance) {
            goldEarned *= 2;
            showFloatingGold(`LUCKY! +${goldEarned}`);
        } else {
            showFloatingGold(`+${goldEarned}`);
        }
        
        // Midas touch bonus
        if (gameState.midasActive) {
            goldEarned *= 5;
        }
        
        gameState.gold += goldEarned;
        gameState.totalEarned += goldEarned;
        
        // Play sound
        playSound(800 + Math.random() * 400, 0.1);
        
        updateDisplay();
        checkAchievements();
        
        if (!gameState.achievements.firstClick) {
            gameState.achievements.firstClick = true;
            showAchievement("First Click! 🎉");
        }
    }

    function activateMidas() {
        if (gameState.gold >= 10000) {
            gameState.gold -= 10000;
            gameState.midasActive = true;
            playSound(1500, 1, 'triangle');
            showAchievement("Midas Touch Activated! ✨");
            
            document.getElementById('powerStatus').innerHTML = '<div style="color: #ffd700; font-weight: bold;">⚡ MIDAS TOUCH ACTIVE ⚡</div>';
            
            setTimeout(() => {
                gameState.midasActive = false;
                document.getElementById('powerStatus').innerHTML = '';
                showAchievement("Midas Touch Ended");
            }, 30000);
            
            updateDisplay();
        }
    }

    function activateRain() {
        if (gameState.gold >= 50000) {
            gameState.gold -= 50000;
            gameState.rainActive = true;
            playSound(1200, 1, 'sawtooth');
            showAchievement("Golden Rain Activated! 🌧️");
            
            document.getElementById('powerStatus').innerHTML = '<div style="color: #ffd700; font-weight: bold;">🌧️ GOLDEN RAIN ACTIVE 🌧️</div>';
            
            const rainInterval = setInterval(() => {
                if (gameState.rainActive) {
                    clickTreasure();
                }
            }, 500);
            
            setTimeout(() => {
                gameState.rainActive = false;
                clearInterval(rainInterval);
                document.getElementById('powerStatus').innerHTML = '';
                showAchievement("Golden Rain Ended");
            }, 60000);
            
            updateDisplay();
        }
    }

    function showFloatingGold(text) {
        const floating = document.createElement('div');
        floating.className = 'floating-gold';
        floating.textContent = text;
        
        const btn = document.getElementById('treasureBtn');
        const rect = btn.getBoundingClientRect();
        floating.style.left = (rect.left + rect.width/2 - 30) + 'px';
        floating.style.top = (rect.top - 20) + 'px';
        floating.style.position = 'fixed';
        
        document.body.appendChild(floating);
        
        setTimeout(() => {
            if (floating.parentNode) {
                floating.remove();
            }
        }, 2000);
    }

    function buyUpgrade(type) {
        const upgrade = gameState.upgrades[type];
        
        if (gameState.gold >= upgrade.cost) {
            gameState.gold -= upgrade.cost;
            upgrade.count++;
            
            if (type === 'pickaxe') {
                gameState.clickPower++;
            } else if (type === 'autoClicker') {
                gameState.autoGold++;
            } else if (type === 'multiplier') {
                gameState.prestigeBonus += 0.5;
            } else if (type === 'luck') {
                gameState.luckChance += 0.1;
            } else if (type === 'blessing') {
                gameState.clickPower += Math.floor(gameState.clickPower * 0.5);
            }
            
            upgrade.cost = Math.floor(upgrade.baseCost * Math.pow(1.5, upgrade.count));
            
            playSound(1000, 0.3, 'square');
            updateDisplay();
            checkAchievements();
            
            if (!gameState.achievements.firstUpgrade) {
                gameState.achievements.firstUpgrade = true;
                showAchievement("First Upgrade! ⚡");
            }
        }
    }

    function buyBuilding(type) {
        const building = gameState.buildings[type];
        
        if (gameState.gold >= building.cost) {
            gameState.gold -= building.cost;
            building.count++;
            gameState.autoGold += building.production;
            
            building.cost = Math.floor(building.baseCost * Math.pow(1.15, building.count));
            
            playSound(600, 0.5, 'sawtooth');
            updateDisplay();
            checkAchievements();
            
            if (!gameState.achievements.firstBuilding) {
                gameState.achievements.firstBuilding = true;
                showAchievement("First Building! 🏗️");
            }
        }
    }

    function prestige() {
        if (gameState.gold >= 1000000) {
            gameState.gold = 0;
            gameState.clickPower = 1;
            gameState.autoGold = 0;
            gameState.prestigeLevel++;
            gameState.prestigeBonus += 0.1;
            gameState.luckChance = 0;
            
            // Reset upgrades and buildings
            for (let upgrade in gameState.upgrades) {
                gameState.upgrades[upgrade].count = 0;
                gameState.upgrades[upgrade].cost = gameState.upgrades[upgrade].baseCost;
            }
            
            for (let building in gameState.buildings) {
                gameState.buildings[building].count = 0;
                gameState.buildings[building].cost = gameState.buildings[building].baseCost;
            }
            
            playSound(1200, 1, 'triangle');
            updateDisplay();
            
            if (!gameState.achievements.firstPrestige) {
                gameState.achievements.firstPrestige = true;
                showAchievement("First Prestige! ⭐");
            }
            
            showAchievement(`Prestige Level ${gameState.prestigeLevel}! 🌟`);
        }
    }

    function checkAchievements() {
        if (gameState.gold >= 100 && !gameState.achievements.hundred) {
            gameState.achievements.hundred = true;
            showAchievement("100 Gold! 💰");
        }
        
        if (gameState.gold >= 1000 && !gameState.achievements.thousand) {
            gameState.achievements.thousand = true;
            showAchievement("1,000 Gold! 💎");
        }
        
        if (gameState.gold >= 10000 && !gameState.achievements.tenThousand) {
            gameState.achievements.tenThousand = true;
            showAchievement("10,000 Gold! 👑");
        }
        
        if (gameState.gold >= 1000000 && !gameState.achievements.million) {
            gameState.achievements.million = true;
            showAchievement("1 MILLION GOLD! 🎉");
        }
        
        if (gameState.totalEarned >= 10000000 && !gameState.achievements.richPlayer) {
            gameState.achievements.richPlayer = true;
            showAchievement("ULTRA RICH! 🏆");
        }
    }

    function showAchievement(text) {
        const notification = document.getElementById('achievementNotification');
        notification.textContent = text;
        notification.classList.add('show');
        
        playSound(1500, 0.5, 'triangle');
        
        setTimeout(() => {
            notification.classList.remove('show');
        }, 3000);
    }

    function updateDisplay() {
        document.getElementById('goldDisplay').textContent = Math.floor(gameState.gold).toLocaleString();
        document.getElementById('clickPowerDisplay').textContent = Math.floor(
```
